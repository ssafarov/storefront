jQuery(function(C){if(typeof wc_checkout_params==="undefined"){return false}C.blockUI.defaults.overlayCSS.cursor="default";var h=10,K=undefined,m=K,q=[],B,s,e,t,y,I,x,T,M,H,v,L,S,G,b,D,J,o,f,u,j,i,E,r,N,l,c,k,F,g,A,P,Q,a,d,p,n;function O(X){if(!X){X=5}var W="";var U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_";for(var V=0;V<X;V++){W+=U.charAt(Math.floor(Math.random()*U.length))}return W}var w={updateTimer:false,dirtyInput:true,$order_review:C("#order_review"),$checkout_form:C("form.checkout"),isUserLogged:false,init:function(){C(document.body).bind("update_checkout",this.reset_update_checkout_timer);C(document.body).bind("update_checkout",this.update_checkout);C(document.body).bind("updated_checkout",this.updated_checkout);C(document.body).bind("init_checkout",this.init_checkout);this.$order_review.on("click","input[name=payment_method]",this.payment_method_selected);this.$checkout_form.on("submit",this.submit);this.$checkout_form.on("blur input change",".input-text",this.validate_field);this.$checkout_form.on("show",".input-text, select",this.validate_field);this.$checkout_form.on("input change","select.shipping_method, input[name^=shipping_method], .update_totals_on_change select, .update_totals_on_change input[type=radio]",this.trigger_update_checkout);this.$checkout_form.on("change",".customer-field input.input-text, .address-field input.input-text, .address-field input.input-text, .update_totals_on_change input.input-text",this.maybe_input_changed);this.$checkout_form.on("input change",".address-field select",this.input_changed);this.$checkout_form.on("input change",".update_totals_on_change input.input-text",this.queue_update_checkout);this.$checkout_form.on("change","#ship-to-different-address input",this.ship_to_different_address);this.$checkout_form.on("change","#billing-address-the-same-as-shipping input",this.billing_the_same_as_shipping);this.$order_review.find("input[name=payment_method]:checked").trigger("click");this.$checkout_form.find("#ship-to-different-address input").trigger("change");this.$checkout_form.find("#billing-address-the-same-as-shipping input").trigger("change");if(wc_checkout_params.option_guest_checkout==="yes"){C("input#createaccount").change(this.toggle_create_account).change()}if(C("#billing-address-the-same-as-shipping input").length>0){K=C("#billing-address-the-same-as-shipping input").is(":checked");m=K}var U={action:"is_user_logged_in"};jQuery.post(globalFuel.ajaxUrl,U,function(V){this.isUserLogged=V=="yes";if(wc_checkout_params.is_checkout==="1"){C(document.body).trigger("init_checkout")}})},toggle_create_account:function(){C("div.create-account").hide();if(C(this).is(":checked")){C("div.create-account").slideDown()}},init_checkout:function(){C(document.body).find("#checkout_coupon_form").hide();C("#billing_country, #shipping_country, .country_to_state").change();C(document.body).trigger("update_checkout",[false])},maybe_input_changed:function(U){if(w.dirtyInput){w.input_changed(U)}},input_changed:function(U){w.dirtyInput=U.target;w.maybe_update_checkout()},queue_update_checkout:function(V){var U=V.keyCode||V.which||0;if(U===9){return true}w.dirtyInput=this;w.reset_update_checkout_timer();w.updateTimer=setTimeout(w.maybe_update_checkout,1000)},trigger_update_checkout:function(U){U=typeof U!=="undefined"?U:true;w.reset_update_checkout_timer();w.dirtyInput=false;C(document.body).trigger("update_checkout",U)},maybe_update_checkout:function(){var U=true;if(C(w.dirtyInput).size()){var V=C(w.dirtyInput).closest("div").find(".address-field.validate-required, .customer-field.validate-required, .email-field.validate-required");if(V.size()){V.each(function(){if(C(this).find("input.input-text").val()===""){U=false}})}}if(U){w.trigger_update_checkout()}},billing_the_same_as_shipping:function(){m=K;K=C("#billing-the-same-as-shipping-address-checkbox").is(":checked");C("div.billing_address").find("input").each(function(){C(this).hide()});C("div.billing_address").hide();if(!K){C("div.billing_address").find("input").each(function(){C(this).show()});C("div.billing_address").slideDown()}w.trigger_update_checkout(false)},ship_to_different_address:function(){m=K;K=!C(this).is(":checked");C("div.shipping_address").find("input").each(function(){C(this).hide()});C("div.shipping_address").hide();if(!K){C("div.shipping_address").find("input").each(function(){C(this).show()});C("div.shipping_address").slideDown()}w.trigger_update_checkout(false)},payment_method_selected:function(){if(C(".payment_methods input.input-radio").length>1){var U=C("div.payment_box."+C(this).attr("ID"));if(C(this).is(":checked")&&!U.is(":visible")){C("div.payment_box").filter(":visible").slideUp(250);if(C(this).is(":checked")){C("div.payment_box."+C(this).attr("ID")).slideDown(250)}}}else{C("div.payment_box").show()}if(C(this).data("order_button_text")){C("#place_order").val(C(this).data("order_button_text"))}else{C("#place_order").val(C("#place_order").data("value"))}},reset_update_checkout_timer:function(){clearTimeout(w.updateTimer)},validate_field:function(){var X=C(this),W=X.closest(".form-row"),Y=true,V=X.val();if(W.is(".validate-required")){if(V===""){W.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field");Y=false}}if(W.is(".validate-email")){if(V){var U=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);if((!U.test(V))||(X.hasClass("need-login"))||(X.hasClass("error"))||(X.hasClass("invalid-state"))){W.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-email");Y=false}}}if(W.is(".validate-postcode")){if(V===""){W.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-postcode");Y=false}}if(Y){W.removeClass("woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-email woocommerce-invalid-postcode").addClass("woocommerce-validated")}n=X.attr("id")},update_checkout:function(V,U){w.reset_update_checkout_timer();w.updateTimer=setTimeout(w.update_checkout_action(U),8)},update_checkout_action:function(U){U=typeof U!="undefined"?U:true;if(C("form.checkout").size()===0){return}if(globalFuel.xhrRequest){globalFuel.xhrRequest.abort()}C("select.shipping_method, input[name^=shipping_method][type=radio]:checked, input[name^=shipping_method][type=hidden]").each(function(){q[C(this).data("index")]=C(this).val()});B=C("#order_review input[name=payment_method]:checked").val();s=C("#billing_first_name").val();e=C("#billing_last_name").val();t=C("#billing_company").val();y=C("#billing_email").val();I=C("#billing_country").val();x=C("#billing_country option:selected").text();T=C("#billing_state").val();M=C("#billing_county").val();H=C("#billing_postcode").val();v=C("#billing_city").val();L=C("#billing_address_1").val();S=C("#billing_address_2").val();G=C("#shipping_first_name").val();b=C("#shipping_last_name").val();D=C("#shipping_company").val();J=C("#shipping_email").val();o=C("#shipping_country").val();f=C("#shipping_country option:selected").text();u=C("#shipping_state").val();j=C("#shipping_county").val();i=C("#shipping_postcode").val();E=C("#shipping_city").val();r=C("#shipping_address_1").val();N=C("#shipping_address_2").val();l=C("#order_comments").val();c=C("input[name=account_password]").length>0?C("input[name=account_password]").val():undefined;k=C(".addresses_block").find(".shipping_info");g=k.find(".customer");A=k.find(".address");F=C(".addresses_block").find(".billing_info");P=F.find(".customer");Q=F.find(".address");if(K!==undefined){if(K){s=G;e=b;t=D;y=J;I=o;x=f;T=u;M=j;H=i;v=E;L=r;S=N}if(m&&!K){s=G;e=b;t=D;y=J;I=o;x=f;T=u;M=j;H=i;v=E;L=r;S=N;C("#billing_first_name").val(G);C("#billing_last_name").val(b);C("#billing_company").val(D);C("#billing_email").val(J);C("#billing_country").val(o);C("#billing_state").val(u);C("#billing_county").val(j);C("#billing_postcode").val(i);C("#billing_city").val(E);C("#billing_address_1").val(r);C("#billing_address_2").val(N)}}if(c&&C("input[name=account_password]").length>0){C("input[name=account_password]").val(c)}if((k.length>0)&&(g.length>0)&&(A.length>0)){d=C("<b>{0} {1}</b>".format(G,b).trim());a="{0}, {1}, {2}, {3}, {4}, {5}, {6}, {7}".format(D,r,N,E,j,u,i,f).replace(/^,/,"").replace(/undefined,/g,"").replace(/\s,\s/g,", ").replace(/,\s,/g,", ").replace(/,,\s/g,", ").replace(/\s\s+/g," ").trim();p=C("<span>"+a+"</span>");g.html(d);A.html(p)}if((F.length>0)&&(P.length>0)&&(Q.length>0)){d=C("<b>{0} {1}</b>".format(s,e).trim());a="{0}, {1}, {2}, {3}, {4}, {5}, {6}, {7}".format(t,L,S,v,M,T,H,x).replace(/^,/,"").replace(/undefined,/g,"").replace(/\s,\s/g,", ").replace(/,\s,/g,", ").replace(/,,\s/g,", ").replace(/\s\s+/g," ").trim();p=C("<span>"+a+"</span>");P.html(d);Q.html(p)}C(".woocommerce-checkout-payment, .woocommerce-checkout-review-order-table").block({message:null,overlayCSS:{background:"#fff",opacity:0.6}});var V={security:wc_checkout_params.update_order_review_nonce,ship_to_different_address:!K,billing_the_same_as_shipping:K,shipping_method:q,payment_method:B,first_name:s,last_name:e,company:t,email:y,country:I,county:M,state:T,postcode:H,city:v,address:L,address_2:S,billing_first_name:s,billing_last_name:e,billing_company:t,billing_email:y,billing_country:I,billing_county:M,billing_state:T,billing_postcode:H,billing_city:v,billing_address_1:L,billing_address_2:S,s_first_name:G,s_last_name:b,s_company:D,s_email:J,s_country:o,s_county:j,s_state:u,s_postcode:i,s_city:E,s_address:r,s_address_2:N,shipping_first_name:G,shipping_last_name:b,shipping_company:D,shipping_email:J,shipping_country:o,shipping_county:j,shipping_state:u,shipping_postcode:i,shipping_city:E,shipping_address_1:r,shipping_address_2:N,order_comments:l,post_data:C("form.checkout").serialize()};if(!w.isUserLogged&&C("input[name=account_password]").length>0){if((c==undefined)||c.length<h){c=O(h)}V.account_password=c;C("input[name=account_password]").val(c)}if(U){globalFuel.xhrRequest=C.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","update_order_review"),data:V,success:function(X){if(X&&X.fragments){C.each(X.fragments,function(Y,Z){C(Y).replaceWith(Z);C(Y).unblock()})}if("failure"===X.result){var W=C("form.checkout");if("true"===X.reload){window.location.reload();return}C(".woocommerce-error, .woocommerce-message").remove();if(X.messages){W.prepend(X.messages)}else{W.prepend(X)}W.find(".input-text, select").blur();C("#wizard").hide();C("html, body").animate({scrollTop:(C("form.checkout").offset().top-100)},1000)}if(C(".woocommerce-checkout").find("input[name=payment_method]:checked").size()===0){C(".woocommerce-checkout").find("input[name=payment_method]:eq(0)").attr("checked","checked")}C(".woocommerce-checkout").find("input[name=payment_method]:checked").eq(0).trigger("click");if((typeof n=="string")&&(n.length>0)){C("#"+n).focus()}C("#billing-the-same-as-shipping-address-checkbox").prop("checked",K);w.billing_the_same_as_shipping();C(document.body).trigger("updated_checkout")}})}else{C(document.body).trigger("updated_checkout")}},updated_checkout:function(){m=K;C.validate({form:jQuery("form.checkout"),language:{requiredFields:"Field cannot be blank",notConfirmed:"Passwords do not match"}});C("div.blockUI").hide();return true},submit:function(){C(document.body).trigger("update_checkout");var U=C(this);if(U.is(".processing")){return false}var V=C("#payment input[name=payment_method]:checked").val()!=undefined?C("#payment input[name=payment_method]:checked").val():C("#order_review input[name=payment_method]:checked").val();if(U.triggerHandler("checkout_place_order")!==false&&U.triggerHandler("checkout_place_order_"+V)!==false){U.addClass("processing");C("#billing-the-same-as-shipping-address-checkbox-hidden").prop("disabled",K);C("#billing-the-same-as-shipping-address-checkbox").prop("disabled",!K);C("#shipping_first_name").val(G);C("#shipping_last_name").val(b);C("#shipping_company").val(D);C("#shipping_email").val(J);C("#shipping_country").val(o);C("#shipping_state").val(u);C("#shipping_county").val(j);C("#shipping_postcode").val(i);C("#shipping_city").val(E);C("#shipping_address_1").val(r);C("#shipping_address_2").val(N);C("#order_comments").val(l);C("#billing_first_name").val(s);C("#billing_last_name").val(e);C("#billing_company").val(t);C("#billing_email").val(y);C("#billing_country").val(I);C("#billing_state").val(T);C("#billing_county").val(M);C("#billing_postcode").val(H);C("#billing_city").val(v);C("#billing_address_1").val(L);C("#billing_address_2").val(S);C("input[name=account_password]").val(c);if(c&&C("input[name=account_password]").length>0){C("input[name=account_password]").val(c)}var W=U.data();if(1!==W["blockUI.isBlocked"]){U.block({message:null,overlayCSS:{background:"#fff",opacity:0.6}})}C.ajax({type:"POST",url:wc_checkout_params.checkout_url,data:U.serialize(),dataType:"json",success:function(X){try{if(X.result==="success"){if(-1===X.redirect.indexOf("https://")||-1===X.redirect.indexOf("http://")){window.location=X.redirect}else{window.location=decodeURI(X.redirect)}}else{if(X.result==="failure"){throw"Result failure"}else{throw"Invalid response"}}}catch(Y){if(X.reload==="true"){window.location.reload();return}if(X.refresh==="true"){C(document.body).trigger("update_checkout")}if(X.messages){w.submit_error(X.messages)}else{w.submit_error('<div class="woocommerce-error">'+wc_checkout_params.i18n_checkout_error+"</div>")}}},error:function(X,Z,Y){w.submit_error('<div class="woocommerce-error">'+Y+"</div>")}})}return false},submit_error:function(U){C(".woocommerce-error, .woocommerce-message").remove();w.$checkout_form.prepend(U);w.$checkout_form.removeClass("processing").unblock();w.$checkout_form.find(".input-text, select").blur();C("html, body").animate({scrollTop:(C("form.checkout").offset().top-100)},1000);C(document.body).trigger("checkout_error")}};var z={init:function(){C(document.body).on("click","a.showcoupon",this.show_coupon_form);C(document.body).on("click","a.hidecoupon",this.hide_coupon_form);C(document.body).on("click",".woocommerce-remove-coupon",this.remove_coupon);C(document.body).on("click","input[name=apply_coupon]",this.submit);C("#checkout_coupon_form").hide()},show_coupon_form:function(){C(document.body).find("a.showcoupon").parent().fadeToggle(400,function(){C("#checkout_coupon_form").slideToggle(200,function(){C("#checkout_coupon_form").find("input[name=coupon_code]").focus()})});return false},hide_coupon_form:function(){C("#checkout_coupon_form").slideToggle(200,function(){C(document.body).find("a.showcoupon").parent().fadeToggle(400)});return false},submit:function(){var U=C("#checkout_coupon_form").find("input[name=coupon_code]").val(),W=C("#checkout_coupon_form").find(errorElement+"."+helpBlockClass);if(C("#checkout_coupon_form").is(".processing")){return false}if(globalFuel.xhrRequest){globalFuel.xhrRequest.abort()}if(W.length!=0){W.removeClass(errorMessageClass).removeClass(successMessageClass).addClass(workingMessageClass).html("Checking the code...")}C("#checkout_coupon_form").addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:0.6}});var V={security:wc_checkout_params.apply_coupon_nonce,coupon_code:U};globalFuel.xhrRequest=C.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","apply_coupon"),data:V,success:function(X){C(".woocommerce-error, .woocommerce-message").remove();C("#checkout_coupon_form").removeClass("processing").unblock();if(X){parsedResponse=C(X);messageClass=parsedResponse.hasClass("alert-danger")?errorMessageClass:successMessageClass;errorMessage=parsedResponse.text().replace("&times;","").replace("Ã—","");if(W.length==0){C("#coupon_code").parent().append("<"+errorElement+' class="'+messageClass+" "+helpBlockClass+'">'+errorMessage+"</"+errorElement+">")}else{W.removeClass(errorMessageClass).removeClass(successMessageClass).removeClass(workingMessageClass).addClass(messageClass).html(errorMessage)}if(!parsedResponse.hasClass("alert-danger")){setTimeout((function(){C(document.body).trigger("update_checkout")}),2500)}}},dataType:"html"});return false},remove_coupon:function(X){X.preventDefault();var U=C(this).parents(".woocommerce-checkout-review-order"),V=C(this).data("coupon");U.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:0.6}});var W={security:wc_checkout_params.remove_coupon_nonce,coupon:V};C.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","remove_coupon"),data:W,success:function(Y){C(".woocommerce-error, .woocommerce-message").remove();U.removeClass("processing").unblock();if(Y){C("form.woocommerce-checkout").before(Y);C(document.body).trigger("update_checkout");C(".checkout_coupon").find('input[name="coupon_code"]').val("")}},error:function(Y){if(wc_checkout_params.debug_mode){console.log(Y.responseText)}},dataType:"html"})}};var R={init:function(){C(document.body).on("click","a.showlogin",this.show_login_form)},show_login_form:function(){C("form.login").slideToggle();return false}};C(document).ready(function(){R.init();w.init();z.init()})});